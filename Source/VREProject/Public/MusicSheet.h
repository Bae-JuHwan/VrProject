// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "MusicSheet.generated.h"

USTRUCT(BlueprintType)
struct FNode
{
	GENERATED_BODY()
	UPROPERTY(EditAnywhere, BlueprintReadWrite)
	TArray<int32> NodeNums; // 동시에 누를 노드들
};
UCLASS()
class VREPROJECT_API AMusicSheet : public AActor
{
	GENERATED_BODY()
	
public:	
	// Sets default values for this actor's properties
	AMusicSheet();

protected:
	// Called when the game starts or when spawned
	virtual void BeginPlay() override;
	
public:	
	// Called every frame
	virtual void Tick(float DeltaTime) override;


	//UFUNCTION(BlueprintCallable)
	//virtual int32 CallFireNode(int32 NodeNum);

    UFUNCTION(BlueprintImplementableEvent)
    int32 CallFireNode(int32 NodeNum);

    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    TArray<int32> DrumNode;
	
    UPROPERTY(EditAnywhere, BlueprintReadWrite)
    TArray<FNode> SimpleDrumSheet = {
        // ===== 전주 (x6 반복) - 인트로에서 16개 제거 =====
      // 6마디 × 8 = 48개에서 16개 제거 → 32개
      {{2}}, {}, {}, {{2}}, {}, {}, {{2}}, {},
      {}, {{2}}, {}, {}, {{2}}, {}, {}, {{2}},
      {}, {}, {{2}}, {}, {}, {{2}}, {}, {},
      {{2}}, {}, {}, {{2}}, {}, {}, {{2}}, {},

      // ===== 전환부 - 2마디 =====
      {{2}}, {}, {}, {{2}}, {}, {{0,2,3}}, {{3}}, {{3}},
      {}, {}, {}, {}, {}, {}, {{2}}, {{0}},

      // ===== A섹션 "처음 널 봤을 때" (x3 반복 포함) =====
      // 1마디
      {{1,2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}},
      // 2마디  
      {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}},
      // 3마디 (x3)
      {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}},
      {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}},
      {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}},
      // 4마디 "이런 널 볼 때마다"
      {{2}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 5마디
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 6마디 (x3)
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 7-8마디
      {{2}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{0,5}}, {{3}}, {{3}}, {{4}}, {{4}},

      // ===== B섹션 "완상 너와 웃으며" =====
      // 1마디
      {{1,2}}, {{5}}, {{3}}, {}, {}, {{0,5}}, {}, {{0,3}},
      // 2마디
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      // 3마디 (x3)
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      // 4마디
      {{1,2}}, {{5}}, {{3}}, {}, {}, {{0,5}}, {}, {{0,3}},
      // 5마디
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{3}},
      // 6마디
      {}, {{5}}, {{0,2}}, {}, {}, {{3}}, {{0,2}}, {{3}}, {{4}}, {{4}}, {{6}},
      // 7마디
      {}, {}, {{0,5}}, {}, {}, {{0,2}}, {}, {},

      // ===== C섹션 "너는 어떠하죠" (x3 반복) =====
      // 1마디
      {{1,2}}, {{5}}, {}, {{3}}, {{2}}, {{5}}, {}, {{3}},
      // 2마디
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      // 3마디 (x3)
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      // 4마디
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      // 5마디
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      // 6마디
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{3}}, {{4}}, {{4}},

      // ===== 간주 (x3 반복) - Image 16 시작 =====
      // 1마디
      {{1,2}}, {{5}}, {}, {{3}}, {{2}}, {{5}}, {}, {{3}},
      // 2마디
      {{2}}, {{5}}, {}, {{3}}, {}, {}, {{0,5}}, {},
      // 3마디 (x3)
      {}, {{0,3}}, {{2}}, {{5}}, {}, {{3}}, {}, {},
      {}, {{0,3}}, {{2}}, {{5}}, {}, {{3}}, {}, {},
      {}, {{0,3}}, {{2}}, {{5}}, {}, {{3}}, {}, {},
      // 4마디
      {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}}, {}, {{3}},
      // 5마디
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      // 6마디
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      // 7마디
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{3}}, {{4}}, {{4}},
      // 8마디
      {}, {}, {}, {}, {}, {}, {}, {{0}},

      // ===== 2A섹션 "태가 없을 때" (x3 반복) =====
      // 1마디 (x3)
      {{2}}, {}, {}, {{2}}, {}, {}, {{2}}, {},
      {{2}}, {}, {}, {{2}}, {}, {}, {{2}}, {},
      {{2}}, {}, {}, {{2}}, {}, {}, {{2}}, {},
      // 2마디
      {}, {{2}}, {}, {}, {{3}}, {{3}}, {{4}}, {{4}},
      // 3마디
      {{2}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 4마디 (x3)
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 5마디
      {{2}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{5}}, {{2}}, {{3}},
      // 6마디
      {{2,5}}, {{5}}, {{2}}, {{3}}, {{2,5}}, {{3}}, {{3}}, {{4}}, {{4}},
      // D.S (반복 기호)

      // ===== D섹션 "아름다운 그대" (x3 반복) =====
      // 1마디
      {{1,2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}},
      // 2마디 (x3)
      {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}},
      {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}},
      {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}},
      // 3마디
      {{1,2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}},
      // 4마디
      {{2}}, {{3}}, {{3}}, {{4}}, {{4}}, {{6}}, {{6}}, {{2}}, {{2}}, {}, {}, {}, {}, {}, {}, {{0}},

      // ===== B섹션 반복 =====
      {{1,2}}, {{5}}, {{3}}, {}, {}, {{0,5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      // (x3)
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{0,3}},
      {{1,2}}, {{5}}, {{3}}, {}, {}, {{0,5}}, {}, {{0,3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{5}}, {}, {{3}},
      {}, {{5}}, {{0,2}}, {}, {}, {{3}}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {}, {{0,5}}, {}, {}, {{0,2}}, {}, {},

      // ===== 3C섹션 "보마디 의" (Image 17) =====
      {{1,2}}, {{5}}, {}, {}, {{2}}, {}, {}, {},
      {{2}}, {}, {}, {}, {}, {}, {{2}}, {},
      {}, {}, {}, {}, {}, {{5}}, {}, {},
      {}, {}, {}, {}, {}, {{3}}, {{3}}, {{3}}, {{3}},

      // 전환
      {}, {}, {{1,2}}, {}, {{3}}, {{3}}, {{3}}, {{3}},
      {}, {}, {}, {}, {}, {}, {}, {},

      // C섹션 반복
      {{1,2}}, {{5}}, {}, {{3}}, {{2}}, {{5}}, {}, {{3}},
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      // (x3)
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{3}}, {{4}}, {{4}},

      // ===== 마지막 (x3 반복) =====
      {{1,2}}, {{5}}, {}, {{3}}, {{2}}, {{5}}, {}, {{3}},
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      // (x3)
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {}, {{0,5}}, {}, {}, {{0,3}}, {{2}}, {{5}},
      {}, {{3}}, {}, {}, {{0,5}}, {}, {}, {{0,3}},
      {}, {}, {{0,5}}, {}, {}, {{3}}, {{2}}, {{5}},
      {}, {}, {{0,2}}, {}, {}, {}, {{1,2}},
    };
};
